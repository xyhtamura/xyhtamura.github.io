<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>72 Munting Panahon</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Roboto:wght@300;400&display=swap');

        :root {
            --bg-color: #fdfdfc;
            --text-color: #333;
            --accent-color: #8B4513;
            --highlight-bg: #f4f1ea;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            overflow: hidden; /* Hide body scrollbar, we scroll the container */
            display: flex;
            justify-content: center;
        }

        #microseason-timeline {
            width: 100%;
            max-width: 600px;
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            padding: 45vh 0; /* Creates space at top and bottom */
            box-sizing: border-box;
            cursor: grab;
            user-select: none; /* Prevents text selection while dragging */
        }
        #microseason-timeline.is-dragging {
            cursor: grabbing;
            scroll-snap-type: none; /* Disable snap while dragging for smoother feel */
        }


        /* Hides the scrollbar for a cleaner look */
        #microseason-timeline::-webkit-scrollbar {
            display: none;
        }
        #microseason-timeline {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .microseason-item {
            scroll-snap-align: center;
            text-align: center;
            padding: 2rem 1.5rem;
            margin: 1rem 0;
            opacity: 0.4;
            transition: opacity 0.4s ease, transform 0.4s ease;
            transform: scale(0.9);
            border-radius: 8px;
        }

        .microseason-item.current {
            opacity: 1;
            transform: scale(1);
            background-color: var(--highlight-bg);
        }

        .microseason-item h2 {
            font-family: 'Merriweather', serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0 0 0.25rem 0;
            color: var(--accent-color);
        }

        .microseason-item p {
            font-family: 'Roboto', sans-serif;
            font-size: 1.1rem;
            font-weight: 300;
            margin: 0;
        }

        .ko-number {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 0.5rem;
        }
        
        /* --- ADDED: Styles for the source links --- */
        .sources-container {
            margin-top: 1rem;
            font-size: 0.85rem;
            color: #777;
        }

        .sources-container a {
            color: var(--accent-color);
            text-decoration: none;
            margin: 0 0.2rem;
            font-weight: bold;
            transition: text-decoration 0.2s;
        }

        .sources-container a:hover {
            text-decoration: underline;
        }


        #center-marker {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 95%;
            max-width: 650px;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--accent-color) 20% 80%, transparent);
            opacity: 0.15;
            z-index: -1;
        }

        .nav-arrow {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background-color: rgba(253, 253, 252, 0.7);
            border: 1px solid #ddd;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--accent-color);
            transition: background-color 0.2s, transform 0.2s;
            backdrop-filter: blur(4px);
        }
        .nav-arrow:hover {
            background-color: var(--highlight-bg);
            transform: translateX(-50%) scale(1.1);
        }
        #nav-up {
            top: 20px;
        }
        #nav-down {
            bottom: 20px;
        }

    </style>
</head>
<body>

    <div id="center-marker"></div>
    <div id="microseason-timeline">
        </div>

    <button id="nav-up" class="nav-arrow" aria-label="Previous microseason">&#9650;</button>
    <button id="nav-down" class="nav-arrow" aria-label="Next microseason">&#9660;</button>

    <script>
        // --- UPDATED: The microseasons array now includes a 'sources' property ---
        const microseasons = [
            { ko: 1, filipinoName: "Ang Damo'y Naninilaw sa Ilalim ng Araw", englishName: "The Grass Browns Under the Sun", dates: "Feb 4–8", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.dlsu.edu.ph/wp-content/uploads/pdf/registrar/schedules/enroll_ta.pdf", "https://www.dlsu.edu.ph/wp-content/uploads/pdf/registrar/schedules/enroll_ug.pdf"] },
            { ko: 2, filipinoName: "Nagsisimulang Magsabog ng Binhi ang mga Koral", englishName: "The Corals Begin their Mass Spawning", dates: "Feb 9–13", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.pna.gov.ph/articles/1171837", "https://www.sciencedaily.com/releases/2022/03/220329171731.htm"] },
            { ko: 3, filipinoName: "Ang Bango ng Sampaguita'y Sumasabog sa Kalye", englishName: "The Scent of Sampaguita Fills the City Streets", dates: "Feb 14–18", sources: ["https://www.officialgazette.gov.ph/2013/05/29/proclamation-no-579-s-2013/", "https://www.nparks.gov.sg/florafaunaweb/flora/2/8/2856", "https://www.pagasa.dost.gov.ph/information/heat-index"] },
            { ko: 4, filipinoName: "Pantay ang Araw at Gabi sa Ekinoks", englishName: "The Sun and Sky are Balanced at the Equinox", dates: "Feb 19–23", sources: ["https://www.loc.gov/everyday-mysteries/zoology/item/how-long-do-butterflies-live/", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 5, filipinoName: "Mga Pipit-Maya'y Nagpupugad", englishName: "The Maya Sparrows Build Their Nests", dates: "Feb 24–28", sources: ["https://www.cabi.org/isc/datasheet/38804", "https://singaporebirds.com/species/eurasian-tree-sparrow/"] },
            { ko: 6, filipinoName: "Nalalaglag ang Puting Talulot ng Katmon", englishName: "The White Petals of the Katmon Tree Fall", dates: "Mar 1–5", sources: ["https://www.nparks.gov.sg/florafaunaweb/flora/2/5/2539", "https://www.pna.gov.ph/articles/1170505", "https://hort.purdue.edu/newcrop/morton/langsat.html"] },
            { ko: 7, filipinoName: "Isang Dakilang Katahimikan ang Bumabalot sa Lungsod", englishName: "A Great Stillness Falls Over the City", dates: "Mar 6–10", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.philippines.travel/en/events"] },
            { ko: 8, filipinoName: "Inaalagaan ng Agila ang Kanyang mga Sisiw", englishName: "The Great Philippine Eagle Cares for its Young", dates: "Mar 11–15", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.pna.gov.ph/articles/1164336", "https://www.officialgazette.gov.ph/nationwide-holidays/"] },
            { ko: 9, filipinoName: "Dumarating ang Rurok ng Tag-init", englishName: "The Peak of the Dry Season's Heat Arrives", dates: "Mar 16–20", sources: ["https://www.pagasa.dost.gov.ph/climate/climatological-normals", "https://www.pagasa.dost.gov.ph/information/uv-index", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 10, filipinoName: "Namumulaklak ng Lila ang Punong Banaba", englishName: "The Banaba Tree Blooms in Purple", dates: "Mar 21–25", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.nparks.gov.sg/florafaunaweb/flora/2/9/2921"] },
            { ko: 11, filipinoName: "Alikabok ay Umaakyat sa Gitna ng Init", englishName: "Dust Rises in the Afternoon Heat", dates: "Mar 26–30", sources: [] },
            { ko: 12, filipinoName: "Ang mga Puno ng Apoy ay Nagbabadya ng Ulan", englishName: "The Fire Trees Herald the Coming Rains", dates: "Mar 31–Apr 4", sources: ["https://www.nparks.gov.sg/florafaunaweb/flora/2/5/2528", "https://newsinfo.inquirer.net/1435853/fire-trees-in-bloom-signal-start-of-rainy-season", "https://www.philippines.travel/en/events"] },
            { ko: 13, filipinoName: "Kasagsagan ng Tamis ng Manggang Kalabaw", englishName: "The Philippine Mango is at its Sweetest", dates: "Apr 5–9", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.pagasa.dost.gov.ph/information/heat-index", "https://www.guinnessworldrecords.com/world-records/sweetest-fruit"] },
            { ko: 14, filipinoName: "Nagsisimula ang mga Pista ng Mayo", englishName: "The Month of May Festivals Begins", dates: "Apr 10–14", sources: ["https://www.philippines.travel/en/events", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 15, filipinoName: "Ang Pistang Pahiyas ay Nagbibihis ng Ani sa Bayan", englishName: "The Pahiyas Festival Adorns the Town in Harvest", dates: "Apr 15–19", sources: ["https://www.nippon.com/en/features/h00124/", "https://guidetothephilippines.ph/articles/history-and-culture/best-festivals-philippines"] },
            { ko: 16, filipinoName: "Ginising ng Unang Kulog ang mga Palaka", englishName: "The First Thunderstorms Awaken the Frogs", dates: "Apr 20–24", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.nationalgeographic.com/animals/amphibians/facts/tree-frog"] },
            { ko: 17, filipinoName: "Rurok ng Panahon ng mga Butanding", englishName: "The Whale Shark Season Peaks", dates: "Apr 25–29", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.discoverdonsol.com/whale-sharks-and-manta-rays.html", "https://www.philippines.travel/en/events"] },
            { ko: 18, filipinoName: "Ang Halimuyak ng Lupa'y Sumisingaw", englishName: "The Scent of Petrichor Fills the Air", dates: "Apr 30–May 4", sources: ["https://www.pagasa.dost.gov.ph/press-release/39", "https://www.pagasa.dost.gov.ph/information/rainy-season"] },
            { ko: 19, filipinoName: "Sinusubok ng Unang Baha ang Lungsod", englishName: "The First Flash Floods Test the City", dates: "May 5–9", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.nparks.gov.sg/florafaunaweb/flora/2/9/2921"] },
            { ko: 20, filipinoName: "Inihahanda ang Bukid para sa Panananim", englishName: "The Fields are Prepared for the Wet-Season Crop", dates: "May 10–14", sources: ["https://www.officialgazette.gov.ph/2024/05/22/deped-issues-order-on-gradual-return-to-june-july-school-year-opening/", "https://www.pna.gov.ph/articles/1174388"] },
            { ko: 21, filipinoName: "Dagsaan ang mga Pagsulpot ng Kulisap", englishName: "A Surge of Insect Life Emerges", dates: "May 15–20", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.philippines.travel/en/events", "https://www.officialgazette.gov.ph/nationwide-holidays/"] },
            { ko: 22, filipinoName: "Namumukadkad ang mga Katutubong Orkidya", englishName: "The Native Orchids Begin to Bloom", dates: "May 21–25", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.pna.gov.ph/articles/1176412"] },
            { ko: 23, filipinoName: "Ang mga Gamu-gamo'y Dumadagsa sa Ilaw", englishName: "Winged Termites Swarm the Lights", dates: "May 26–30", sources: [] },
            { ko: 24, filipinoName: "Simula ng Ani ng Rambutan", englishName: "The Rambutan Harvest Begins", dates: "May 31–June 5", sources: ["https://hort.purdue.edu/newcrop/morton/rambutan.html", "https://www.thephilippines.com/fruits.html", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 25, filipinoName: "Luntiang-luntian ang Kapaligiran", englishName: "The Landscape is at its Most Verdant", dates: "June 6–10", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.philippines.travel/en/events"] },
            { ko: 26, filipinoName: "Umaahon ang mga Bulaklak ng Lotus sa Tubig", englishName: "The Lotus Flowers Rise from the Water", dates: "June 11–15", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.cabi.org/isc/datasheet/70599", "https://thefishsite.com/articles/a-guide-to-tilapia-breeding"] },
            { ko: 27, filipinoName: "Simula ng Rurok ng Panahon ng Bagyo", englishName: "The Peak Typhoon Season Begins", dates: "June 16–20", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.pagasa.dost.gov.ph/information/about-tropical-cyclones", "https://www.pagasa.dost.gov.ph/climate/climate-philippines"] },
            { ko: 28, filipinoName: "Dumarating ang Walang-Tigil na Ulan", englishName: "The Monotonous Rains Arrive", dates: "June 21–26", sources: ["https://www.pagasa.dost.gov.ph/information/about-habagat", "https://www.pagasa.dost.gov.ph/climate/climate-philippines"] },
            { ko: 29, filipinoName: "Nagsisimula ang Ani ng Durian sa Mindanao", englishName: "The Durian Harvest Begins in Mindanao", dates: "June 27–July 1", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.thephilippines.com/fruits.html", "https://www.pna.gov.ph/articles/1181161"] },
            { ko: 30, filipinoName: "Nakikinig ang Bansa sa Talumpati ng Pangulo", englishName: "The Nation Listens to the State of the Nation Address", dates: "July 2–6", sources: ["https://www.nippon.com/en/features/h00124/"] },
            { ko: 31, filipinoName: "Kumakalat ang mga Pakpak na Binhi ng Narra", englishName: "The Winged Seeds of the Narra are Dispersed", dates: "July 7–11", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.nparks.gov.sg/florafaunaweb/flora/3/1/3144", "https://www.philippines.travel/en/events"] },
            { ko: 32, filipinoName: "Nananahan ang Malalim na Halumigmig", englishName: "The Deep, Pervasive Dampness Sets In", dates: "July 12–16", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.pagasa.dost.gov.ph/information/heat-index", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 33, filipinoName: "Pinaparalisa ng Ilang Araw na Ulan ang Kapital", englishName: "Multi-Day Rains Paralyze the Capital", dates: "July 17–22", sources: ["https://www.pagasa.dost.gov.ph/climate/climatological-normals"] },
            { ko: 34, filipinoName: "Ang Buwan ng mga Multo'y Nagsisimula", englishName: "The Ghost Month Begins", dates: "July 23–28", sources: [] },
            { ko: 35, filipinoName: "Ipinagdiriwang ng Davao ang Kadayawan", englishName: "Davao Celebrates the Kadayawan Harvest", dates: "July 29–August 2", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.philippines.travel/en/events", "https://guidetothephilippines.ph/articles/history-and-culture/best-festivals-philippines"] },
            { ko: 36, filipinoName: "Mga Perseid ay Tinatago ng Ulap", englishName: "The Perseid Meteors are Hidden by Clouds", dates: "August 3–7", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary", "https://www.japan-guide.com/e/e2286.html"] },
            { ko: 37, filipinoName: "Lubos na Namumulaklak ang Waling-waling", englishName: "The Waling-waling Orchid is in Full Bloom", dates: "August 8–12", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.officialgazette.gov.ph/2013/05/29/proclamation-no-579-s-2013/", "https://www.pna.gov.ph/articles/1181161"] },
            { ko: 38, filipinoName: "Ang mga Palayan ay Nagiging Ginto mula sa Luntian", englishName: "The Rice Paddies Turn from Green to Gold", dates: "August 13–17", sources: ["https://www.dlsu.edu.ph/wp-content/uploads/pdf/registrar/schedules/enroll_ug.pdf"] },
            { ko: 39, filipinoName: "Naririnig ang mga Unang Pamaskong Awitin", englishName: "The First Christmas Carols are Heard", dates: "August 18–22", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.esquiremag.ph/long-reads/features/paskong-pinoy-a2212-20201216-lfrm", "https://www.nytimes.com/2022/12/23/world/asia/philippines-christmas.html"] },
            { ko: 40, filipinoName: "Naghihintay ng Tuyo ang Bukid para sa Ani", englishName: "The Fields Await a Dry Spell for Harvest", dates: "August 23–27", sources: ["https://www.nippon.com/en/features/h00124/", "https://ebonph.wordpress.com/2014/09/24/the-philippine-bird-migration-primer/"] },
            { ko: 41, filipinoName: "Nagsisimula ang Taunang Klase", englishName: "The Academic Year Begins", dates: "August 28–September 1", sources: [] },
            { ko: 42, filipinoName: "Hamog sa Umaga, Hudyat ng Paghupa ng Habagat", englishName: "Morning Dew Signals the Waning Habagat", dates: "September 2–7", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.philippines.travel/en/events"] },
            { ko: 43, filipinoName: "Dumarating ang mga Unang Dayong Tilis", englishName: "The First Migrant Wagtails Arrive", dates: "September 8–12", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.thephilippines.com/fruits.html", "https://www.pna.gov.ph/articles/1181161"] },
            { ko: 44, filipinoName: "Mga Paruparong Papilio ay Nangingitlog", englishName: "The Papilio Butterflies Lay Their Eggs", dates: "September 13–17", sources: [] },
            { ko: 45, filipinoName: "Ang Birhen ng Peñafrancia'y Naglalayag sa Ilog", englishName: "The Virgin of Peñafrancia Sails the River", dates: "September 18–22", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.philippines.travel/en/events"] },
            { ko: 46, filipinoName: "Nagsisimulang Humupa ang mga Dumadagundong na Kulog", englishName: "The Crashing Thunderstorms Begin to Fade", dates: "September 23–27", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/0004.html", "https://www.nippon.com/en/features/h00124/"] },
            { ko: 47, filipinoName: "Nagdiriwang ang Lungsod ng mga Ngiti", englishName: "The City of Smiles Holds its Festival", dates: "September 28–October 2", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/0004.html", "https://www.philippines.travel/en/events", "https://guidetothephilippines.ph/articles/history-and-culture/best-festivals-philippines"] },
            { ko: 48, filipinoName: "Ang mga Palayan ay Pinatutuyo at Pinagpapahinga", englishName: "The Rice Paddies are Drained and Rested", dates: "October 3–7", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.pagasa.dost.gov.ph/press-release/23"] },
            { ko: 49, filipinoName: "Nagbabalik ang Ariwanas sa Gabi", englishName: "The Milky Way Returns to the Night Sky", dates: "October 8–12", sources: ["https://www.nippon.com/en/japan-topics/g00273/"] },
            { ko: 50, filipinoName: "Ipinagdiriwang ng Camiguin ang Ani ng Lansones", englishName: "Camiguin Celebrates the Lanzones Harvest", dates: "October 13–17", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.philippines.travel/en/events"] },
            { ko: 51, filipinoName: "Huni ng Kuliglig ang Pumapalit sa Kokak ng Palaka", englishName: "The Chirping of Crickets Replaces the Croaking of Frogs", dates: "October 18–22", sources: ["https://www.nippon.com/en/features/h00124/", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 52, filipinoName: "Halimuyak ng Dita sa Gabi", englishName: "The Scent of Dita Fills the Night Air", dates: "October 23–27", sources: ["https://www.pagasa.dost.gov.ph/press-release/23", "https://www.projectnoah.org/spottings/7382685", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 53, filipinoName: "Mga Kandila'y Sinasariwa para sa mga Yumao", englishName: "Candles are Lit for the Departed", dates: "October 28–November 1", sources: ["https://www.pagasa.dost.gov.ph/press-release/23", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 54, filipinoName: "Mga Latia'y Napupuno ng mga Dayong Ibon", englishName: "The Wetlands Teem with Migrants", dates: "November 2–6", sources: ["https://ebonph.wordpress.com/2014/09/24/the-philippine-bird-migration-primer/", "https://www.birdlife.org/news/2022/10/21/the-philippines-a-paradise-and-a-refuge-for-migratory-birds/"] },
            { ko: 55, filipinoName: "Nagsisimulang Bumigat ang Trapiko ng Pasko", englishName: "The Christmas Traffic Begins to Build", dates: "November 7–11", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.numbeo.com/traffic/in/Manila"] },
            { ko: 56, filipinoName: "Pagsisiping ng mga Mamu", englishName: "The Tarsiers Begin their Mating", dates: "November 12–16", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://animalia.bio/spectral-tarsier", "https://allabouttarsier.weebly.com/reproduction.html"] },
            { ko: 57, filipinoName: "Yumayabong ang mga Gumamela", englishName: "The Hibiscus Flowers Flourish", dates: "November 17–21", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.nparks.gov.sg/florafaunaweb/flora/2/7/2713", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 58, filipinoName: "Ang Bituing Baha'y Nagbabadya ng Tag-araw", englishName: "The Baha Constellation Signals the Dry Season", dates: "November 22–26", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.facebook.com/PAGASA.DOST.GOV.PH/posts/pfbid022qg9L9y6sQxU1M11n3t1Y2p88n8Y7g7kvyiWpGz2S1b9S2w2a1zT4g5c8tL12K4l"] },
            { ko: 59, filipinoName: "Hanging Amihan ay Nagpapahinog ng Palay", englishName: "The North Wind Ripens the Grain", dates: "November 27–December 1", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.officialgazette.gov.ph/nationwide-holidays/", "https://www.gmanetwork.com/news/topstories/nation/890098/nlex-sees-10-15-increase-in-traffic-volume-this-long-weekend/story/"] },
            { ko: 60, filipinoName: "Panahon ng Ani ng Kalamansi at Dalandan", englishName: "Calamansi and Dalandan are Harvested", dates: "December 2–6", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.thephilippines.com/fruits.html"] },
            { ko: 61, filipinoName: "Dumarating ang Rurok ng Ginaw", englishName: "The Deepest Chill of the Year Arrives", dates: "December 7–11", sources: ["https://www.pagasa.dost.gov.ph/climate/climatological-normals", "https://www.officialgazette.gov.ph/nationwide-holidays/", "https://www.discoverdonsol.com/whale-sharks-and-manta-rays.html"] },
            { ko: 62, filipinoName: "Kasagsagan ng mga Geminid", englishName: "The Geminid Meteors Peak", dates: "December 12–16", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.dlsu.edu.ph/wp-content/uploads/pdf/registrar/schedules/enroll_ug.pdf", "https://www.pagasa.dost.gov.ph/astronomy/astronomical-diary"] },
            { ko: 63, filipinoName: "Nagsisimula ang Dakilang Uwian", englishName: "The Great Provincial Homecoming Begins", dates: "December 17–21", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.catholic.sg/advent-a-season-of-hope-joy/simbang-gabi-a-cherished-filipino-christmas-tradition/"] },
            { ko: 64, filipinoName: "Halimuyak ng Noche Buena sa Tahanan", englishName: "The Scent of Noche Buena Fills the Home", dates: "December 22–26", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.catholic.sg/advent-a-season-of-hope-joy/simbang-gabi-a-cherished-filipino-christmas-tradition/", "https://www.philippines.travel/en/events"] },
            { ko: 65, filipinoName: "Mga Bakawa'y Nagniningning sa Alitaptap", englishName: "The Mangroves Glimmer with Fireflies", dates: "December 27–31", sources: ["https://www.lonelyplanet.com/philippines/bohol/activities/firefly-kayaking-tour-on-the-abatan-river/a/pa-act/v-91489P2/357283", "https://www.tarsiertravel.com/bohol-tours/bohol-firefly-tour/"] },
            { ko: 66, filipinoName: "Ang Bagong Taon ay Sumisikat sa Usok", englishName: "The New Year Begins in a Haze of Smoke", dates: "January 1–4", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.timeanddate.com/astronomy/meteor-shower/quadrantids.html"] },
            { ko: 67, filipinoName: "Milyon-milyong Dumadagsa sa Poong Nazareno", englishName: "Millions Throng for the Black Nazarene", dates: "January 5–9", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.philippines.travel/en/events"] },
            { ko: 68, filipinoName: "Dumarating ang Kanais-nais na Panahon", englishName: "The Perfect Weather Arrives", dates: "January 10–14", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://www.thephilippines.com/fruits.html", "https://www.philippines.travel/en/events"] },
            { ko: 69, filipinoName: "Kasagsagan ng mga Pista ng Santo Niño", englishName: "The Great Festivals of the Santo Niño Peak", dates: "January 15–19", sources: ["https://www.ana.co.jp/en/jp/japan-travel-planner/suggesters/season/", "https://guidetothephilippines.ph/articles/history-and-culture/best-festivals-philippines", "https://www.philippines.travel/en/events"] },
            { ko: 70, filipinoName: "Ang Bituing Balatik ay Sumisikat, Hudyat ng Pagtatanim", englishName: "Balatik Rises, Signaling the Planting Season", dates: "January 20–24", sources: ["https://www.facebook.com/PAGASA.DOST.GOV.PH/posts/pfbid022qg9L9y6sQxU1M11n3t1Y2p88n8Y7g7kvyiWpGz2S1b9S2w2a1zT4g5c8tL12K4l", "https://www.pna.gov.ph/articles/1091562", "https://www.nationalmuseum.gov.ph/2021/05/28/balatik-and-moroporo-stars-of-the-philippine-sky/"] },
            { ko: 71, filipinoName: "Gintong Alpombra ng mga Bulaklak ng Narra", englishName: "A Golden Carpet of Narra Blossoms Falls", dates: "January 25–29", sources: ["https://www.pna.gov.ph/articles/1172931", "https://www.officialgazette.gov.ph/2014/06/01/the-narra-tree-our-national-tree/", "https://www.nparks.gov.sg/florafaunaweb/flora/3/1/3144"] },
            { ko: 72, filipinoName: "Ang Hangin ay Nagiging Malamig at Tuyo", englishName: "The Air Turns Crisp and Dry", dates: "January 30–February 3", sources: [] }
        ];

            document.addEventListener('DOMContentLoaded', () => {
        const timeline = document.getElementById('microseason-timeline');
        
        // --- 1. Populate the Timeline ---
        const fragment = document.createDocumentFragment();
        microseasons.forEach((season, index) => {
            const item = document.createElement('div');
            item.className = 'microseason-item';
            item.dataset.index = index;

            let sourcesHtml = '';
            if (season.sources && season.sources.length > 0) {
                const links = season.sources.map((url, i) => 
                    `<a href="${url}" target="_blank" rel="noopener noreferrer">[${i + 1}]</a>`
                ).join(' ');
                sourcesHtml = `<div class="sources-container">Sources: ${links}</div>`;
            }
            
            item.innerHTML = `
                <div class="ko-number">Kō ${season.ko} &mdash; (${season.dates})</div>
                <h2>${season.filipinoName}</h2>
                <p>${season.englishName}</p>
                ${sourcesHtml}
            `;
            fragment.appendChild(item);
        });
        
        // --- 2. Create Cyclical/Infinite Scroll ---
        const totalItems = microseasons.length;
        timeline.prepend(fragment.cloneNode(true)); 
        timeline.appendChild(fragment.cloneNode(true));
        timeline.appendChild(fragment.cloneNode(true)); 

        // --- 3. Find Today's Microseason and Scroll to It ---
        const currentSeasonIndex = getCurrentMicroseasonIndex();
        
        setTimeout(() => {
            const targetElement = timeline.querySelector(`.microseason-item[data-index='${currentSeasonIndex}']`);
            if (!targetElement) return;
            
            const itemHeight = targetElement.offsetHeight;
            const itemMargin = parseInt(window.getComputedStyle(targetElement).marginTop) + parseInt(window.getComputedStyle(targetElement).marginBottom);
            const fullItemHeight = itemHeight + itemMargin;

            const middleSetOffset = totalItems * fullItemHeight;
            const initialScrollTop = targetElement.offsetTop + middleSetOffset - (timeline.clientHeight / 2) + (itemHeight / 2);

            timeline.scrollTo({ top: initialScrollTop });
        }, 100);


        // --- 4. Use Intersection Observer to Highlight the Current Item ---
        let currentActiveIndex = -1;
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const newIndex = entry.target.dataset.index;
                    if (newIndex !== currentActiveIndex) {
                        const oldCurrent = timeline.querySelector('.microseason-item.current');
                        if(oldCurrent) oldCurrent.classList.remove('current');
                        
                        entry.target.classList.add('current');
                        currentActiveIndex = newIndex;
                    }
                }
            });
        }, {
            root: null,
            rootMargin: "-50% 0px -50% 0px",
            threshold: 0
        });

        timeline.querySelectorAll('.microseason-item').forEach(item => observer.observe(item));

        // --- 5. Handle the Infinite Scroll Reset ---
        timeline.addEventListener('scroll', () => {
            const firstItem = timeline.querySelector('.microseason-item');
            if (!firstItem) return;
            const itemHeight = firstItem.offsetHeight + 16;
            const scrollableHeight = totalItems * itemHeight;

            if (timeline.scrollTop < scrollableHeight * 0.5) {
                timeline.scrollTop += scrollableHeight;
            } else if (timeline.scrollTop > scrollableHeight * 2.5) {
                timeline.scrollTop -= scrollableHeight;
            }
        });
        
        // --- 6. Clickable Arrow Navigation ---
        const navUp = document.getElementById('nav-up');
        const navDown = document.getElementById('nav-down');

        navUp.addEventListener('click', () => {
             const currentItem = timeline.querySelector('.microseason-item.current') || timeline.querySelector('.microseason-item');
            if(!currentItem) return;
            const itemHeight = currentItem.offsetHeight + 16;
            timeline.scrollBy({ top: -itemHeight, behavior: 'smooth' });
        });

        navDown.addEventListener('click', () => {
            const currentItem = timeline.querySelector('.microseason-item.current') || timeline.querySelector('.microseason-item');
            if(!currentItem) return;
            const itemHeight = currentItem.offsetHeight + 16;
            timeline.scrollBy({ top: itemHeight, behavior: 'smooth' });
        });


        // --- 7. Click and Drag Scrolling ---
        let isDragging = false;
        let startY;
        let scrollTop;

        timeline.addEventListener('mousedown', (e) => {
            isDragging = true;
            timeline.classList.add('is-dragging');
            startY = e.pageY - timeline.offsetTop;
            scrollTop = timeline.scrollTop;
            timeline.style.scrollSnapType = 'none';
        });

        timeline.addEventListener('mouseleave', () => {
            if (isDragging) {
                isDragging = false;
                timeline.classList.remove('is-dragging');
                timeline.style.scrollSnapType = 'y mandatory';
            }
        });

        timeline.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                timeline.classList.remove('is-dragging');
                timeline.style.scrollSnapType = 'y mandatory';
            }
        });

        timeline.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const y = e.pageY - timeline.offsetTop;
            const walk = (y - startY);
            timeline.scrollTop = scrollTop - walk;
        });

    });
    
    //Function to find the current microseason ---
    function getCurrentMicroseasonIndex() {
        const now = new Date();
        const currentYear = now.getFullYear();
        // A map to convert month abbreviations to JavaScript month index (0-11)
        const monthMap = { "Jan": 0, "Feb": 1, "Mar": 2, "Apr": 3, "May": 4, "June": 5, "July": 6, "Aug": 7, "Sep": 8, "Oct": 9, "Nov": 10, "Dec": 11 };

        // Find the index of the first microseason that starts *after* today's date.
        let nextSeasonIndex = -1;
        for(let i = 0; i < microseasons.length; i++) {
            const season = microseasons[i];
            // Get the start date string (e.g., "Feb 4" from "Feb 4–8")
            const dateString = season.dates.split('–')[0].trim();
            const [monthStr, dayStr] = dateString.split(' ');
            
            const month = monthMap[monthStr];
            const day = parseInt(dayStr, 10);
            
            const seasonStartDate = new Date(currentYear, month, day);

            if (seasonStartDate > now) {
                nextSeasonIndex = i;
                break;
            }
        }

        if (nextSeasonIndex === 0) {
            // If the first season is after today, we are in the last season of the previous cycle.
            return microseasons.length - 1;
        } else if (nextSeasonIndex === -1) {
            // If no season starts after today, we are in the last season of the current cycle.
            return microseasons.length - 1;
        } else {
            // Otherwise, the current season is the one right before the next one.
            return nextSeasonIndex - 1;
        }
    }
</script>
</body>
</html>